# Processed Data

The files in this subdirectory are intermediate-level data files, generated from the raw data files in the `data/` subdirectory and used to compute the result files in the `results/` subdirectory. These files should automatically be generated by some of the preprocessing scripts with the following structure:
```
santa_clara/
    santa_clara_dist.tsv
    santa_clara_fac.tsv
    santa_clara_fac_nbr.tsv
    santa_clara_pop.tsv
    santa_clara_pop_nbr.tsv
```
The format of each type of file is explained below.

## Population File Format

A population file is generated for each location, summarizing population center-specific data in a standardized format. Each population file is a TSV file with the following columns:

* `id`: Index of the population center within this location. All population centers within a directory are given ascending integer indices starting with 0.
* `name`: A unique identifier given to this population center within its source file (e.g. FIPS code).
* `lat`: Latitude of centroid.
* `lon`: Longitude of centroid.
* `pop`: Population, as of the most recent available census or estimate (-1 for missing data).
* `vacc`: Vaccination rate (between 0.0 and 1.0), as of the most recent data (-1 for missing data).
* `adi`: 2022 [Area Deprivation Index (ADI)](https://www.nejm.org/doi/full/10.1056/NEJMp1802313) ranking (-1 for missing data).
* `svi`: 2020 [Social Vulnerability Index (SVI)](https://www.atsdr.cdc.gov/placeandhealth/svi/data_documentation_download.html) ranking (-1 for missing data).
* `urban`: Fraction (from 0.0 to 1.0) of tract's population living in an urban (as opposed to rural) census block, based on [Block-level Urban Area information for the 2020 Census](https://www.census.gov/programs-surveys/geography/guidance/geo-areas/urban-rural.html) and the 2020 [Census National Redistricting Data Summary Files](https://www2.census.gov/programs-surveys/decennial/2020/data/01-Redistricting_File--PL_94-171/0ReadMe_PL_National.pdf) and generated by the scripts in the repo https://github.com/madiyonash/pharmacy-access.
* `pov150`: Fraction (from 0.0 to 1.0) of tract's population living below 150% of the poverty level, based on 2020 [SVI](https://www.atsdr.cdc.gov/placeandhealth/svi/documentation/SVI_documentation_2020.html).
* `noveh`: Fraction (from 0.0 to 1.0) of households in tract that do not have a vehicle, based on 2020 [SVI](https://www.atsdr.cdc.gov/placeandhealth/svi/documentation/SVI_documentation_2020.html).

Each location also has a population file that combines all neighboring locations, indicated by the `_nbr` suffix in the file name. Neighbor file indices pick up where the main file's indices left off, and they include only a subset of the main location's fields, including: `id`, `name`, `lat`, `lon`, `pop`, and `urban`.

## Facility File Format

A facility file is generated for each location, summarizing vaccination facility-specific data in a standardized format. Each facility file is a TSV file with the following columns:

* `id`: Index of the facilities center within this location. All facilities within a directory are given ascending integer indices starting with 0.
* `name`: An identifying string based on its source file (address, coordinates, etc.).
* `lat`: Latitude of facility.
* `lon`: Longitude of facility.
* `cap`: Capacity of facility (for now just 1 for everything, but might include something to account for resource limitations in the future).

Each location also has a facility file that combines all neighboring locations, indicated by the `_nbr` suffix in the file name. Neighbor file indices pick up where the main file's indices left off.

## Distance File Format

A distance file is generated for each location (including all neighbors), indicating the expected travel time between every possible origin/destination pair. Both the main locations and the locations from neighboring counties are included. Each distance file is a TSV file with the following columns:

* `pid`: Index of a population center defined in the population file.
* `fid`: Index of a facility defined in the facility file.
* `time`: Travel time (minutes) from the indicated population center to the indicated facility.
